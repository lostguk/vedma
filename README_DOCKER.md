# üê≥ Docker Configuration

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–µ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- **Laravel Sail** –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker 20.10+
- Docker Compose 2.0+
- –ú–∏–Ω–∏–º—É–º 4GB RAM
- –ú–∏–Ω–∏–º—É–º 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç PHP –ª–æ–∫–∞–ª—å–Ω–æ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Docker:

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
docker run --rm --interactive --tty \
  --volume $PWD:/app \
  composer install

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x dev.sh
```

## üöÄ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Laravel Sail)

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è
./dev.sh up

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
./dev.sh artisan key:generate

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã
./dev.sh reset-db

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏ –¥–ª—è storage
./dev.sh artisan storage:link
```

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
./dev.sh up
./dev.sh down
./dev.sh restart

# –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π
./dev.sh reset-db           # –°–±—Ä–æ—Å –ë–î + —Å–∏–¥—ã
./dev.sh artisan migrate    # –¢–æ–ª—å–∫–æ –º–∏–≥—Ä–∞—Ü–∏–∏

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
./dev.sh test               # –¢–µ—Å—Ç—ã
./dev.sh lint               # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
./dev.sh docs               # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
./dev.sh cache              # –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π

# –ö–æ–Ω—Å–æ–ª—å –∏ –ª–æ–≥–∏
./dev.sh shell              # –ö–æ–Ω—Å–æ–ª—å PHP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
./dev.sh logs               # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
./dev.sh status             # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** http://localhost
- **Adminer (–ë–î):** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **MySQL:** localhost:3306
- **Redis:** localhost:6379
- **Telescope:** http://localhost/telescope

### –†–∞–±–æ—Ç–∞ —Å –ø–∞–∫–µ—Ç–∞–º–∏

```bash
# Composer
./dev.sh composer install
./dev.sh composer require package/name

# NPM
./dev.sh npm install
./dev.sh npm run dev
./dev.sh npm run build

# Artisan
./dev.sh artisan make:controller TestController
./dev.sh artisan queue:work
```

## üè≠ –ü—Ä–æ–¥–∞–∫—à–Ω

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –æ–±—Ä–∞–∑–∞
./dev.sh prod-build
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
# APP_ENV=production
# APP_DEBUG=false
# DB_HOST=mysql
# REDIS_HOST=redis

# –ó–∞–ø—É—Å–∫
./dev.sh prod-up

# –õ–æ–≥–∏
./dev.sh prod-logs          # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./dev.sh prod-logs app      # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
./dev.sh prod-logs mysql    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
./dev.sh prod-logs redis    # Redis
```

### –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–∏—Å–∞–º

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** http://localhost:8080
- **MySQL:** localhost:3306
- **Redis:** localhost:6379

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

```bash
./dev.sh prod-down
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Sail)

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã Laravel Sail
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å
- –õ–æ–∫–∞–ª—å–Ω—ã–µ volumes –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–¥–∞–∫—à–Ω

- ‚úÖ Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (www)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ capabilities
- ‚úÖ Read-only —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- ‚úÖ No new privileges
- ‚úÖ –°–∫—Ä—ã—Ç–∏–µ –≤–µ—Ä—Å–∏–π —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ Health checks

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
./dev.sh logs               # –í—Å–µ –ª–æ–≥–∏ Sail
./dev.sh logs mysql         # –õ–æ–≥–∏ MySQL

# –ü—Ä–æ–¥–∞–∫—à–Ω
./dev.sh prod-logs          # –í—Å–µ –ª–æ–≥–∏ –ø—Ä–æ–¥–∞–∫—à–Ω
./dev.sh prod-logs app      # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

### Health Checks

–ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–º–µ—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ health checks:

- **App:** `GET /health`
- **MySQL:** `mysqladmin ping`
- **Redis:** `redis-cli ping`

### –°—Ç–∞—Ç—É—Å

```bash
./dev.sh status             # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚îú‚îÄ‚îÄ docker-compose.yml              # Laravel Sail (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
‚îú‚îÄ‚îÄ docker-compose.production.yml   # –ü—Ä–æ–¥–∞–∫—à–Ω
‚îú‚îÄ‚îÄ Dockerfile                      # –ü—Ä–æ–¥–∞–∫—à–Ω –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ docker/                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ default.conf
‚îÇ   ‚îú‚îÄ‚îÄ php/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ php.ini
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ php-fpm.conf
‚îÇ   ‚îú‚îÄ‚îÄ mysql/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ my.cnf
‚îÇ   ‚îú‚îÄ‚îÄ redis/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redis.conf
‚îÇ   ‚îî‚îÄ‚îÄ supervisor/
‚îÇ       ‚îî‚îÄ‚îÄ supervisord.conf
‚îî‚îÄ‚îÄ dev.sh                          # –£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–∫—Ä–∏–ø—Ç
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Sail):**
- `APP_PORT=80` - –ø–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `FORWARD_DB_PORT=3306` - –ø–æ—Ä—Ç MySQL
- `FORWARD_REDIS_PORT=6379` - –ø–æ—Ä—Ç Redis
- `WWWUSER/WWWGROUP` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–æ–¥–∞–∫—à–Ω:**
- `APP_ENV=production`
- `APP_DEBUG=false`
- `DB_HOST=mysql`
- `REDIS_HOST=redis`

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Docker –Ω–µ –∑–∞–ø—É—â–µ–Ω**
   ```bash
   sudo systemctl start docker
   ```

2. **–ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
   sudo netstat -tulpn | grep :80
   
   # –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç—ã –≤ .env
   APP_PORT=8080
   ```

3. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Linux)**
   ```bash
   # –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –≥—Ä—É–ø–ø–µ docker
   sudo usermod -aG docker $USER
   
   # –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
   newgrp docker
   ```

4. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ Mac**
   - Sail –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è Mac
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è named volumes –¥–ª—è vendor/
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### –û—á–∏—Å—Ç–∫–∞

```bash
# –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö Docker —Ä–µ—Å—É—Ä—Å–æ–≤
./dev.sh docker-clean

# –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker system prune -af --volumes
```

### –°–±—Ä–æ—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./dev.sh down
./dev.sh build
./dev.sh up
./dev.sh reset-db

# –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –ø—Ä–æ–¥–∞–∫—à–Ω
./dev.sh prod-down
./dev.sh prod-build
./dev.sh prod-up
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# IDE Helper (–¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è)
./dev.sh ide-helper

# –†–∞–±–æ—Ç–∞ —Å –æ—á–µ—Ä–µ–¥—è–º–∏ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
./dev.sh artisan queue:work

# –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
./dev.sh artisan schedule:work

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
./dev.sh artisan tinker
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ —É –≤–∞—Å –±—ã–ª–∞ —Å—Ç–∞—Ä–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# 2. –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
docker images | grep shop_ | awk '{print $3}' | xargs docker rmi

# 3. –û—á–∏—Å—Ç–∏—Ç–µ volumes (–í–ù–ò–ú–ê–ù–ò–ï: –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö!)
docker volume prune

# 4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤—ã—à–µ –¥–ª—è –Ω–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

**üí° –°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./dev.sh help` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥!