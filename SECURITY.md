# üîí –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –û–±–∑–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–î–∞–Ω–Ω–∞—è Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –≤–∫–ª—é—á–∞—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è GDPR, –∏ —Å–ª–µ–¥—É–µ—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.

## üõ°Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –ò–∑–æ–ª—è—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

- **–ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**: –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å —Ñ–ª–∞–≥–æ–º `no-new-privileges:true`
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ capabilities**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `cap_drop: ALL` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø—Ä–∞–≤
- **–°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ frontend –∏ backend —Å–µ—Ç–µ–π
- **Read-only —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã**: –ì–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è read-only volumes

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è CPU –∏ –ø–∞–º—è—Ç–∏**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–º–µ—é—Ç —á–µ—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤
- **tmpfs –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tmpfs –¥–ª—è /tmp –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π**: Rate limiting –≤ nginx –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ MySQL

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å PHP

- **–û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ –æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö PHP —Ñ—É–Ω–∫—Ü–∏–π
- **Session –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Secure cookies, HttpOnly, SameSite –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**: open_basedir –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
- **–°–∫—Ä—ã—Ç–∏–µ –≤–µ—Ä—Å–∏–π**: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ expose_php –∏ server_tokens

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤**: –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π**: max_connections, max_user_connections
- **–ê—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–∫–ª—é—á–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ localhost**: –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å localhost –≤ dev —Ä–µ–∂–∏–º–µ

### 5. Nginx –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Security headers**: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Rate limiting**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ API –∏ auth endpoints
- **SSL/TLS**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –∏ —à–∏—Ñ—Ä—ã
- **CSP**: Content Security Policy –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS
- **OCSP Stapling**: –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SSL

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π

### Development Environment

–§–∞–π–ª: `docker-compose.dev.yml`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –î–æ—Å—Ç—É–ø –∫ Adminer –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –ë–æ–ª—å—à–µ –ª–∏–º–∏—Ç–æ–≤ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–ü–æ—Ä—Ç—ã:**
- Web: `8000` (HTTP only)
- MySQL: `3307` (localhost only)
- Redis: `6378` (localhost only)
- Adminer: `8081` (localhost only)

### Production Environment

–§–∞–π–ª: `docker-compose.yml`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
- Read-only volumes –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è backend —Å–µ—Ç—å
- SSL/TLS –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

**–ü–æ—Ä—Ç—ã:**
- Web: `80`, `443` (HTTPS redirect)
- MySQL: `3306` (localhost only)
- Redis: `6379` (localhost only)

## üîë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
mkdir -p secrets
echo "$(openssl rand -base64 32)" > secrets/mysql_root_password.txt
echo "$(openssl rand -base64 32)" > secrets/mysql_password.txt
chmod 600 secrets/*
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–ª—è production:**
```env
DB_PASSWORD=use_secrets_instead
REDIS_PASSWORD=strong_redis_password
APP_ENV=production
APP_DEBUG=false
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ development –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
./dev.sh dev-up
```

### –ó–∞–ø—É—Å–∫ production –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
./dev.sh prod-up
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
./dev.sh security-scan
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

- [ ] –ò–∑–º–µ–Ω–µ–Ω—ã –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º (600 –¥–ª—è .env, secrets)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (`./dev.sh security-scan`)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã network –ø–æ–ª–∏—Ç–∏–∫–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω firewall –Ω–∞ —Ö–æ—Å—Ç —Å–∏—Å—Ç–µ–º–µ

### –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:

- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker –æ–±—Ä–∞–∑–æ–≤
- [ ] –†–æ—Ç–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- [ ] –ê—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`composer audit`)
- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üõ†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
./dev.sh logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
./dev.sh logs nginx
./dev.sh logs php
./dev.sh logs mysql
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
./dev.sh status

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ Docker
docker stats
```

## üö® –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**
   ```bash
   ./dev.sh down
   ```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞**
   ```bash
   docker-compose logs > incident_$(date +%Y%m%d_%H%M%S).log
   ```

3. **–ò–∑–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø–∞—Ä–æ–ª–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã**
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
5. **–û–±–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π**

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: security@company.com
- **DevOps –∫–æ–º–∞–Ω–¥–∞**: devops@company.com
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: support@company.com

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Docker Security Best Practices](https://docs.docker.com/engine/security/)
- [OWASP Container Security](https://owasp.org/www-project-container-security/)
- [CIS Docker Benchmark](https://www.cisecurity.org/benchmark/docker)
- [GDPR Compliance Guide](https://gdpr.eu/)

---

**–í–∞–∂–Ω–æ:** –î–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, —Ç—Ä–µ–±—É—é—â–∏–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.