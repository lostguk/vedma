; --- Основное ---
expose_php = Off
display_errors = On
log_errors = On
error_log = /proc/self/fd/2
error_reporting = E_ALL

; --- Загрузка файлов ---
file_uploads = On
upload_max_filesize = 100M
post_max_size = 120M
max_file_uploads = 50

; --- Открытые директории ---
open_basedir = /var/www/html:/tmp:/var/www/html/storage:/usr/bin:/usr/local/bin

; --- Безопасность (менее строгая для dev) ---
disable_functions = exec,passthru,shell_exec,system
allow_url_fopen = Off
allow_url_include = Off
auto_globals_jit = On
register_globals = Off
magic_quotes_gpc = Off

; --- Session Security ---
session.cookie_httponly = 1
session.use_strict_mode = 1
session.use_only_cookies = 1
session.name = PHPSESSID_DEV
session.gc_maxlifetime = 3600
session.cookie_lifetime = 0

; --- Производительность ---
memory_limit = 1G
max_execution_time = 300
max_input_time = 300
max_input_vars = 5000

; --- Визуальный вывод ---
html_errors = On
display_startup_errors = On

; --- Отладка ---
assert.active = On
zend.assertions = 1
opcache.enable = 1
opcache.enable_cli = 1
opcache.validate_timestamps = 1
opcache.revalidate_freq = 0

; --- Xdebug (если установлен) ---
xdebug.mode = debug,develop
xdebug.start_with_request = yes
xdebug.client_host = host.docker.internal
xdebug.client_port = 9003